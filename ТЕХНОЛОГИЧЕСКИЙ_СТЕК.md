# Технологический стек

**Проект:** Pre-flight валидатор тендерной заявки
**Дата решения:** 2026-02-06
**Фокус:** 44-ФЗ + услуги

---

## Стек технологий

| Компонент | Технология | Версия | Почему |
|---|---|---|---|
| **Frontend** | Next.js | 15 (App Router) | React, SSR, API routes из коробки |
| **Backend** | Next.js API Routes | 15 | Встроенный, не нужен Express |
| **Database** | PostgreSQL | 16+ | Надежно, JSONB для rule-engine |
| **ORM** | Prisma | 5+ | Type-safe, миграции |
| **UI** | shadcn/ui + Tailwind CSS | latest | Компоненты из коробки |
| **State** | React Context / Zustand | latest | Простота |
| **File upload** | Uploadthing / Vercel Blob | latest | Удобно для Next.js |
| **Testing** | Vitest + Playwright | latest | Быстро, современно |
| **Deployment** | Vercel | latest | Бесплатно для start, CI/CD |

---

## Почему Node.js/Next.js?

### ✅ Плюсы
1. **Один язык JS** — упрощает разработку и поиск команды
2. **Богатая экосистема для наших задач:**
   - PDF: `pdf-parse`, `pdfjs-dist`
   - DOCX: `mammoth`, `docx`
   - OCR: `tesseract.js`
   - Криптография: `node-forge`, `crypto`
3. **Vercel** — бесплатный хостинг для start, CI/CD из коробки
4. **Специалисты** — в РФ Node.js-разработчиков больше
5. **Next.js** — уже включает backend (API routes), не нужен Express

### ❌ Почему не Rails?
1. **Два языка** — Ruby (backend) + JS (frontend React/Next.js)
2. **Меньше специалистов в РФ** — рынок Node.js/Java/Go больше
3. **Меньше библиотек для наших задач** (PDF/DOC/OCR/крипто)
4. **Хостинг** — Puma/Unicorn требуют больше памяти, Vercel не поддерживает
5. **CPU-тяжелые задачи** — OCR, анализ документов — Ruby медленнее Node.js

---

## Структура проекта

```
pre-flight-validator/
├── app/
│   ├── (marketing)/           # Landing page
│   │   ├── page.tsx
│   │   └── layout.tsx
│   ├── app/                    # Основное приложение
│   │   ├── upload/             # Загрузка файлов
│   │   │   └── page.tsx
│   │   ├── validate/           # Проверка (progress)
│   │   │   └── page.tsx
│   │   └── report/             # Отчеты
│   │       └── [id]/page.tsx
│   ├── api/                    # API routes
│   │   ├── upload/
│   │   │   └── route.ts
│   │   ├── validate/
│   │   │   └── route.ts
│   │   └── report/
│   │       └── [id]/route.ts
│   └── layout.tsx
├── lib/
│   ├── db/                    # Prisma client
│   │   └── prisma.ts
│   ├── services/              # Business logic
│   │   ├── AnonymityCheckService.ts
│   │   ├── SignatureCheckService.ts
│   │   ├── RequiredDocsService.ts
│   │   └── Form2ValidationService.ts
│   ├── rules/                 # Rule engine
│   │   └── rules.ts
│   └── utils/
│       ├── file-parser.ts     # PDF/DOC parser
│       └── validators.ts
├── prisma/
│   ├── schema.prisma          # DB schema
│   └── migrations/
├── components/
│   ├── ui/                    # shadcn/ui components
│   ├── FileUploader.tsx       # Drag & drop
│   ├── ErrorPanel.tsx         # Список ошибок
│   └── CheckList.tsx          # Чек-листы
└── public/
    └── assets/
```

---

## Установка зависимостей

```bash
# Next.js + shadcn/ui
npx create-next-app@latest pre-flight-validator
cd pre-flight-validator
npx shadcn-ui@latest init

# Prisma
npm install prisma @prisma/client
npx prisma init

# File upload
npm install uploadthing @uploadthing/react

# Testing
npm install vitest @testing-library/react @playwright/test
```

---

## Следующие шаги

1. ✅ Выбран стек: Node.js/Next.js
2. ✅ Разработана архитектура
3. ⏸️ UI/UX дизайн (5 дней)
4. ⏸️ Настроить репозиторий (GitHub, ветки, CI/CD)
5. ⏸️ Настроить окружение (dev/staging/prod)
